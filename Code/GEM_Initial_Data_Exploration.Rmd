---
title: "Shana Inital Data Exploration"
author: "Shana Shapiro"
date: "4/4/2022"
output: pdf_document
---

```{r Libraries }
library(tidyverse, quietly = TRUE)
library(lubridate)
library(agricolae)
library(ggplot2)
library(zoo)
library(trend)
library(readr)
library(dplyr)
library(tidyr)
```


```{r url}
#the_url <- 'https://databank.worldbank.org/source/country-climate-and-development-report-(ccdr)'
#download for Japan
```

```{r theme}
mytheme <- theme_classic(base_size = 14) +
  theme(axis.text = element_text(color = "black"), 
        legend.position = "right")

theme_set(mytheme)
```


```{r explore}
GEM_raw <- read.csv('../Data/Raw/Japan_GEM_Data.csv', stringsAsFactors = TRUE)

CCDR <- read.csv('../Data/Processed/GFD_processed.csv', stringsAsFactors = TRUE)
GFD <- read.csv('../Data/Processed/CCDR_processed.csv', stringsAsFactors = TRUE)

str(GEM_raw)
dim(GEM_raw)
length(GEM_raw)
summary(GEM_raw)
```

```{r wrangle}
GEM_wrangle <- GEM_raw %>% 
  drop_na()
  
colnames(GEM_wrangle) <- c("Country","Country.Code","Series","Series.Code",1:13)

#this stopped working well 
# rename(GEM_filter, c('Country' = Ã¯..Country, 
#                      '2008' = X2008..2008.,
#                      '2009' = X2009..2009., 
#                      '2010' = X2010..2010.,
#                      '2011' = X2011..2011.,
#                      '2012' = X2012..2012.,
#                      '2013' = X2013..2013.,
#                      '2014' = X2014..2014., 
#                      '2015' = X2015..2015., 
#                      '2016' = X2016..2016., 
#                      '2017' = X2017..2017.,
#                      '2018' = X2018..2018.,
#                      '2019' = X2019..2019.,
#                      '2020' = X2020..2020.))

Series.Desc <- c("Exports","GDP","Imports","Production","Stock","Reserves","Unemployment") 

GEM_wrangle$Series.Desc <- Series.Desc

GEM_metadata <- select(GEM_wrangle, starts_with("Series"))
GEM_select <- GEM_wrangle[,5:18]
GEM_tr <- as.data.frame(t(GEM_select))
colnames(GEM_tr) <- GEM_tr[14,]
GEM_tr <- GEM_tr[-14,]
Years <- seq(dmy("01-01-2008"), dmy("01-01-2020"), by = "year")
GEM_tr$Country <- "Japan"
GEM_tr$Year <- Years


GEM_processed <- GEM_tr %>%
  select(Country, Year, everything())

GEM_processed$Year <- as.Date(GEM_processed$Year , format = "%m/%d/%Y")
GEM_processed$Exports <- as.numeric(GEM_processed$Exports)
GEM_processed$GDP <- as.numeric(GEM_processed$GDP)
GEM_processed$Imports <- as.numeric(GEM_processed$Imports)
GEM_processed$Production <- as.numeric(GEM_processed$Production)
GEM_processed$Stock <- as.numeric(GEM_processed$Stock)
GEM_processed$Reserves <- as.numeric(GEM_processed$Reserves)
GEM_processed$Unemployment <- as.numeric(GEM_processed$Unemployment)

#2009-2018
GEM_processed <- GEM_processed[c(2:11),]

#str(GEM_processed)

```

```{r}
write.csv(GEM_processed,"../Data/Processed/GEM_processed.csv")
```

```{r}
plot1 <-
  ggplot(GEM_processed, aes(x = Year, y = Exports)) +
  geom_point() +
  geom_smooth(method = lm, se = FALSE, col = "red") +
  labs(x = "Year", y = "Exports")
plot1

```

```{r}
plot2 <-
  ggplot(GEM_processed, aes(x = Year, y = Unemployment)) +
  geom_point() +
  geom_smooth(method = lm, se = FALSE, col = "blue") +
  labs(x = "Year", y = "Unemployment")
plot2
```


```{r}
#countries 
#japan, phillipines, sri lanka, 
```